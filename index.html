<!DOCTYPE html>
<html>
<meta charset="utf-8">
<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="node_modules/codemirror/lib/codemirror.css">
<link rel="stylesheet" href="node_modules/codemirror/theme/twilight.css">
<link rel="stylesheet" href="style.css">
<script src="scripts/d3.v4.min.js"></script>
<script src="node_modules/codemirror/lib/codemirror.js"></script>
<script src="node_modules/codemirror/mode/javascript/javascript.js"></script>
<script src="node_modules/codemirror/mode/xml/xml.js"></script>
<body>
  <h1>M2 Sigma – Module U351_33<br>
Bibliothèques JavaScript de GéoVisualisation<br>
L'exemple de Data-Driven Documents (D3)</h1>
  <p><a href="https://ljegou.github.io/">Laurent Jégou</a>, <a href="http:///sigma.univ-toulouse.fr">Master 2 Sigma - UT2J-ENSAT</a></p><br>
  <p>Ce site est un tutoriel d'introduction à la bibliothèque de fonctions <a href="http://www.d3js.org">D3</a>, qui permet de réaliser des représentations graphiques vectorielles interactives dans une page web. Il s'agit de la version de décembre 2017, réécrite pour D3 version 4.
  </p>
  <p>Inspiré du workshop interactif de <a href="https://github.com/vicapow/d3-1-day-workshop">Victor Powell</a>
  <section>
    <h3>Cette page est interactive !</h3>
    <p>
      Les sections en fond noir sur cette page sont des éditeurs de texte interactifs, leur interprétation est proposée automatiquement sur la partie droite. Vous pouvez donc modifier le code HTML/SVG/JS/CSS et voir le résultat immédiatement !
    </p>
    <p>
      Un <a href="html-playground.html">bac à sable" interactif"</a> de plus grande taille est aussi disponible.
    </p>
  </section>
  <section>
	<h2>Positionnement</h2>
	<p>Les techniques de représentation interactive des données, ou data visualization (dataviz) connaissent depuis quelques année un fort développement sur le support Internet, grâce aux fonctionnalités nouvelles apportées par le standard HTML5 et la manipulation d'objets vectoriels au format SVG. Des bibliothèques de fonctions JavaScript permettent de rendre accessible la création de ce type de graphismes interactifs sur Internet, en simplifiant la manipulation des objets graphiques et des données.</p>
  </section>
  <section>
	<h2>Bibliographie :</h2>
	<ul>
		<li>Scott Murray, "Interactive Data Visualization", paru aux éditions O'Reilly en 2013 (gratuit voir lien ci-dessous).</li>
		<li>Mike Dewar, "Getting started with D3", O'Reilly, 2012.</li>
		<li>Michael Bostock, Jason Davies, "Code as cartography", revue The Cartograhic Journal, vol. 50 n°2, mai 2013.</li>
		<li>Nick Qi Zhu, "Data Visualization with D3.js Cookbook", éditions Pakt Publishing, 2013 (cf. site avec les codes sources en lien ci-dessous).</li>
	</ul>
  </section>
  <section>
	<h2><a id="sites"></a>Sites Internet :</h2>
	<ul>
		<li><a href="http://d3js.org/">D3</a></li>
		<li><a href="http://alignedleft.com/tutorials/d3/">Scott Murray (cf. biblio)</a></li>
		<li><a href="http://www.delimited.io/blog/">Delimited.io (tutoriels)</a></li>
		<li><a href="https://www.dashingd3js.com/">DashingD3 (tutoriels, newsletter)</a></li>
		<li><a href="http://nickqizhu.github.io/d3-cookbook/">D3 visualization cookbook</a></li>
		<li><a href="http://christopheviau.com/d3list/">The big list of D3 examples de Christophe Viau</a></li>
		<li><a href="http://bost.ocks.org/mike/d3/workshop/">D3 Workshop de Mike Bostock</a></li>
		<li><a href="https://github.com/mbostock/d3/wiki/Tutorials">Liste de tutoriaux</a></li>
		<li><a href="http://mappemonde.mgm.fr/rubriques/118/118-geovisualisation/">La rubrique « Géovisualisation » de la revue M@ppemonde</a></li>
		<li><a href="http://victoralexandre.fr/demo_d3.html">Un tutoriel progressif en français, par Victor Alexandre.</a></li>
	</ul>
  </section>
  <br>
  <section class="toplevel">
    <span class="session-title">
      <h2>Les bases</h2>
    </span>
    <section class="level2">
      <h3>Le Document Object Model (DOM)</h3>
      <iframe style="height:600px" src="html-playground.html#hello-dom"></iframe>
    </section>
    <section class="level2">
      <h2>Le format SVG : des images vectorielles</h2>
      <section>
        <p>
          <h4>&lt;rect&gt; Rectangle</h4>
          Documentation MDN : 
          <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/rect">
            &lt;rect&gt;
          </a>
        </p>
        <iframe style="height:140px" src="html-playground.html#hello-svg-rect"></iframe>
      </section>

      <section>
        <p>
          <h4>&lt;circle&gt; Cercle</h4>
          Documentation MDN : 
          <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/circle">
            &lt;circle&gt;
          </a>
        </p>
        <iframe style="height:140px" src="html-playground.html#hello-svg-circle"></iframe>
      </section>

      <section>
        <p>
          <h4>&lt;path&gt; Chemin (ligne brisée)</h4>
          Documentation MDN : 
          <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/path">
            &lt;path&gt;
          </a>
        </p>
        <iframe style="height:140px" src="html-playground.html#hello-svg-path"></iframe>
      </section>

      <section>
        <p>
          <h4>&lt;text&gt; Texte</h4>
          Documentation MDN : 
          <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/text">
            &lt;text&gt;
          </a>
        </p>
        <iframe style="height:140px" src="html-playground.html#hello-svg-text"></iframe>
      </section>

      <section>
        <p>
          <h4>&lt;g&gt; Groupes and transformations (translation, rotation, échelle)</h4>
          Documentation MDN : 
          <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/g">
            &lt;g&gt;
          </a>
        </p>
        <iframe style="height:140px" src="html-playground.html#hello-svg-g"></iframe>
        <p>
          <h4> Groupes &lt;g&gt; imbriqués</h4>
        </p>
        <iframe style="height:320px" src="html-playground.html#hello-svg-g-recursve"></iframe>
      </section>

      <h3>Styles SVG</h3>

      <section>
        <p>
          <h4>Fill - Remplissage</h4>
        </p>
        <iframe style="height:140px" src="html-playground.html#svg-styles-fill"></iframe>
      </section>

      <section>
        <p>
          <h4>Stroke - Contour</h4>
        </p>
        <iframe style="height:140px" src="html-playground.html#svg-styles-stroke"></iframe>
      </section>

      <section>
        <p>
          <h4>Un exemple plus complexe</h4>
        </p>
        <iframe style="height:600px" src="html-playground.html#hello-svg"></iframe>
      </section>
    </section>

    <section class="level2">
      <h2>SVG dynamisatique avec JavaScript : la bibliothèque D3</h2>

      <section>
        <h3>Modifier le DOM avec D3</h3>
        <p>
          D3 permet de modifier un arbre DOM créé en SVG.
        </p>
        <iframe style="height:600px" src="html-playground.html#hello-javascript"></iframe>
      </section>

      <section>
        <h3>selector.style()</h3>
        <p>
          Nous pouvons maintenant changer les styles SVG par la programmation.
        </p>
        <iframe style="height:250px" src="html-playground.html#selector-style"></iframe>
      </section>

      <section>
        <h3>selector.attr()</h3>
        <p>
          Idem avec les attributs SVG
        </p>
        <iframe style="height:250px" src="html-playground.html#selector-attr"></iframe>
      </section>

      <section>
        <h3>accessors</h3>
		<p>
			Les paramètres peuvent être définis par une fonction plutôt que par une constante.
		</p>
        <iframe style="height:300px" src="html-playground.html#selector-accessors"></iframe>
      </section>

      <section>
        <h3>Rappels sur les fonctions JavaScript</h3>
        <iframe style="height:300px" src="html-playground.html#javascript-functions-as-objects"></iframe>
      </section>

      <section>
        <h3>Créer des images SVG à partir de zéro en JavaScript avec D3</h3>
        <iframe style="height:600px" src="estuary.html#svg-from-javascript"></iframe>
      </section>

      <section>
        <h3>selector.enter()</h3>
        <p>
          Une nouvelle méthode pour ajouter des éléments.
        </p>
        <p>
          Documentation: <a target="_blank" href="https://github.com/mbostock/d3/wiki/Selections#enter">selector.enter()</a>
        </p>
        <iframe style="height:600px" src="estuary.html#selector-enter"></iframe>
      </section>

      <section>
        <h3>Décomposition de selector.enter()</h3>
        <iframe style="height:600px" src="estuary.html#selector-enter-break-down"></iframe>
      </section>

      <section>
        <h3>Les transitions : animer les images vectorielles</h3>
        <p>
          Documentation: <a target="_blank" href="https://github.com/mbostock/d3/wiki/Transitions">transitions</a>
        </p>
        <iframe style="height:600px" src="estuary.html#transitions-intro"></iframe>
      </section>

      <section>
        <h3>Enchaîner les transitions</h3>
        <iframe style="height:600px" src="estuary.html#transitions-chaining"></iframe>
      </section>

      <section>
        <h2>Liaisons de données et transitions</h2>
        <p>
          Documentation: <a target="_blank" href="https://github.com/mbostock/d3/wiki/Arrays#d3_range">d3.range()</a>
        </p>
        <iframe style="height:600px" src="estuary.html#data-binding-and-transitions"></iframe>
      </section>
    </section>
	<br>
    <span class="session-title">
      <h2>Un peu d'infographie</h2>
    </span>
    <section class="level2">
      <h3>Un histogramme simple</h3>
	  <p>Les données sont dans une structure de données JSON</p>
      <iframe style="height:600px" src="estuary.html#histo1"></iframe>
    </section>
    <section class="level2">
      <h3>Ajoutons des libellés et un peu de souplesse</h3>
	  <p></p>
      <iframe style="height:600px" src="estuary.html#histo2"></iframe>
    </section>
    <section class="level2">
      <h3>Un diagramme de points XY</h3>
	  <p></p>
      <iframe style="height:600px" src="estuary.html#pts1"></iframe>
    </section>
    <section class="level2">
      <h3>On ajoute des axes automatiques</h3>
	  <p></p>
      <iframe style="height:600px" src="html-playground.html#pts2"></iframe>
    </section>
  </section>
  <br>
  <span class="session-title">
      <h2>Un peu de cartographie</h2>
    </span>
    <section class="level2">
      <h3>Afficher un fond de carte en projection azimuthale orthographique</h3>
	  <p>Les données cartographiques proviennent d'un fichier TopoJSON.</p>
      <iframe style="height:600px" src="html-playground.html#carto1"></iframe>
    </section>
    <section class="level2">
      <h3>Afficher un fond de carte en projection équivalente (surfaces préservée)</h3>
	  <p>Les données cartographiques proviennent d'un fichier TopoJSON.</p>
      <iframe style="height:600px" src="html-playground.html#carto2"></iframe>
    </section>
    <section class="level2">
      <h3>Dessiner une carte thématique</h3>
	  <p>Les données cartographiques et statistiques proviennent d'un fichier TopoJSON.</p>
      <iframe style="height:600px" src="html-playground.html#carto3"></iframe>
    </section>
</section>
<p><b>Pour aller plus loin, consultez <a href="sites"la liste de sites</a> proposés, surtout les exemples commentés (blocks).</b></p>

<script>
d3.selectAll('.code-mirror').each(function() {
  var dim = [this.clientWidth, this.clientHeight]
  var js = d3.select(this).classed('js')
  var cm = CodeMirror.fromTextArea(this, {
    tabSize: 2,
    mode: js ? 'javascript' : 'htmlmixed',
    lineNumbers: true,
    // theme: 'twilight',
    lineWrapping: true,
    readOnly: true,
  })
  cm.setSize.apply(cm, dim)
})

// add anchor links
function anchorify(text) {
  return text.replace(/ /, '-').toLowerCase()
}
</script>
</body>
</html>
